!function(e,t){"use strict";"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.autosize=t()}(this,function(){function e(e){function t(){var t=window.getComputedStyle(e,null);"vertical"===t.resize?e.style.resize="none":"both"===t.resize&&(e.style.resize="horizontal"),e.style.wordWrap="break-word";var i=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=i,r="none"!==t.maxHeight?parseFloat(t.maxHeight):!1,s="content-box"===t.boxSizing?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),o()}function o(){var t=e.style.height,o=document.documentElement.scrollTop,i=document.body.scrollTop;e.style.height="auto";var n=e.scrollHeight+s;if(r!==!1&&n>r?(n=r,"scroll"!==e.style.overflowY&&(e.style.overflowY="scroll")):"hidden"!==e.style.overflowY&&(e.style.overflowY="hidden"),e.style.height=n+"px",document.documentElement.scrollTop=o,document.body.scrollTop=i,t!==e.style.height){var a=document.createEvent("Event");a.initEvent("autosize.resized",!0,!1),e.dispatchEvent(a)}}if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!e.hasAttribute("data-autosize-on")){var r,s;"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",o),window.addEventListener("resize",o),e.addEventListener("input",o),e.addEventListener("autosize.update",o),e.addEventListener("autosize.destroy",function(t){window.removeEventListener("resize",o),e.removeEventListener("input",o),e.removeEventListener("keyup",o),e.removeEventListener("autosize.destroy"),Object.keys(t).forEach(function(o){e.style[o]=t[o]}),e.removeAttribute("data-autosize-on")}.bind(e,{height:e.style.height,overflow:e.style.overflow,overflowY:e.style.overflowY,wordWrap:e.style.wordWrap,resize:e.style.resize})),e.setAttribute("data-autosize-on",!0),e.style.overflow="hidden",e.style.overflowY="hidden",t()}}return"function"!=typeof window.getComputedStyle?function(e){return e}:function(t){return t&&t.length?Array.prototype.forEach.call(t,e):t&&t.nodeName&&e(t),t}});var formSubmit=function(e){var t=!0;e.find("input").each(function(){$(this).is(":required")&&""===$(this).val()&&($(this).addClass("error"),t=!1),$(this).is("input[type=email]")&&!validateEmail($(this).val())&&($(this).addClass("error"),t=!1)}),t?$.ajax({url:e.attr("action"),type:"POST",data:e.serialize(),dataType:"json",success:function(t){if(e.removeClass("loading"),t.success)e.replaceWith(t.successMessage);else if(t.error){if(!e.find(".error").length){var o=$('<span class="error errormsg"></span>');e.append(o)}$(".errormsg").html(t.error)}}}):e.removeClass("loading")},checkSuccess=function(e){""===e.val()?e.removeClass("success").next("label").removeClass("stayup"):e.is('input[type="checkbox"], input[type="radio"]')?console.log("not valid field type"):e.addClass("success").next("label").addClass("stayup")},validateEmail=function(e){var t=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;return t.test(e)},formJsInit=function(){$("form input, form textarea").each(function(){checkSuccess($(this))}),autosize($("form textarea:not(.no-autosize)")),$("form input, form textarea").each(function(){var e=$(this);checkSuccess(e)}),$("form input, form textarea").off().on("blur",function(e){var t=$(e.target);t.removeClass("error"),checkSuccess(t),t.is('input[type="email"]')&&""!==t.val()&&(validateEmail(t.val())||t.addClass("error"))}),$("form").off().on({keyup:function(e){var t=$(e.target);if(t.removeClass("error").removeClass("success"),t.is('input[type="number"]')){var o=t.val().replace(/[^0-9]/g,"");t.val(o)}},click:function(e){{var t=$(e.target),o=t.parents("form");o.attr("action")}t.is("a.submit, input[type=submit]")&&(e.preventDefault(),o.addClass("loading"),formSubmit(o))}})};$(function(){formJsInit()});